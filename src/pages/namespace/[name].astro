---
import Namespace from "@/components/astro/Namespace.astro";
import DefaultLayout from "@/layout/DefaultLayout.astro";
import "@/styles/globals.css";
import { WEBSITE_NAME } from "astro:env/server";
import { getK8sNamespaceInfo } from "@/lib/k8s/client";

const { name } = Astro.params;
if (!name) {
  Astro.redirect("/");
}
const namespaceInfo = await getK8sNamespaceInfo(name!);
if (!namespaceInfo) {
  return new Response(null, {
    status: 404,
    statusText: "Not found",
  });
}
---

<DefaultLayout title={WEBSITE_NAME}>
  <Namespace namespaceInfo={namespaceInfo} , name={name!} />
</DefaultLayout>
